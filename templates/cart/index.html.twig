{% extends 'base.html.twig' %}

{% block title %}Mon panier{% endblock %}

{% block body %}
    <h1 class="text-3xl font-bold mb-6">Mon panier</h1>

    {% if cart is empty %}
        <p>Votre panier est vide.</p>
    {% else %}
        <ul>
            {% for course in cart %}
                <li class="mb-4 p-4 border rounded flex justify-between items-center">
                    <div>
                        <h3 class="text-xl font-semibold">{{ course.name }}</h3>
                        <p>{{ course.price }} €</p>

                        <label for="student_{{ course.id }}">Attribuer à :</label>
                        <select id="student_{{ course.id }}" name="student_{{ course.id }}" class="border rounded px-2 py-1">
                            <option value="">-- Choisir un étudiant --</option>
                            {% for student in students %}
                                <option value="{{ student.id }}">{{ student.firstName }} {{ student.lastName }}</option>
                            {% endfor %}
                        </select>
                    </div>

                    <div>
                        <a href="{{ path('cart_remove', {'id': course.id}) }}" class="text-red-600 hover:underline">Supprimer</a>
                    </div>
                </li>
            {% endfor %}
        </ul>

        <p class="mt-4 font-semibold">Total : {{ total }} €</p>

        <div class="mt-6 flex gap-4">
            <a href="{{ path('cart_clear') }}" class="px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600">Vider le panier</a>
            <a href="{{ path('course_index') }}" class="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">Retour aux achats</a>
        </div>
    {% endif %}

    {% if cart is not empty %}
        {# ... ta liste de produits #}

        <div class="mt-6">
            <a href="{{ path('cart_checkout') }}" class="btn btn-primary">
                Valider le panier
            </a>
        </div>
    {% endif %}


{% endblock %}
