{% extends 'base.html.twig' %}

{% block title %}Mon profil{% endblock %}

{% block body %}
    <h1>Mon Profil</h1>

    <section>
        <h2>Informations du parent</h2>
        <p><strong>Nom :</strong> {{ app.user.firstname }}</p>
        <p><strong>Email :</strong> {{ app.user.email }}</p>

        {# <a href="{{ path('app_user_edit', {id: user.id}) }}">Modifier le profil</a> #}
    </section>

    <section class="my-8">
        <a href="{{ path('student_new') }}" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">Créer une fiche élève</a>
    </section>

    <section class="grid gap-6 grid-cols-1 md:grid-cols-2 lg:grid-cols-3">
        <h2 class="col-span-full text-xl font-bold">Mes enfants</h2>
        {% if students is not empty %}
            {% for student in students %}
                <div class="bg-white p-4 rounded shadow">
                    <p><strong>Prénom :</strong> {{ student.firstname }}</p>
                    <p><strong>Nom :</strong> {{ student.lastname }}</p>


                    <div class="mt-4 flex gap-2">
                        <a href="{{ path('student_show', {id: student.id}) }}" class="text-blue-600 hover:underline">Voir détails</a>
                        <a href="{{ path('student_edit', {id: student.id}) }}" class="text-yellow-600 hover:underline">Modifier</a>

                        <form method="post" action="{{ path('student_delete', {id: student.id}) }}" onsubmit="return confirm('Supprimer cet élève ?');">
                            <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ student.id) }}">
                            <button type="submit" class="text-red-600 hover:underline">Supprimer</button>
                        </form>
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <p class="col-span-full text-gray-500">Aucun enfant inscrit.</p>
        {% endif %}
    </section>

    <form method="post" action="{{ path('app_logout') }}" class="mt-8">
        <button type="submit" class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700">Se déconnecter</button>
    </form>
{% endblock %}
